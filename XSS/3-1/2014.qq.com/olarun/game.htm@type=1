<!DOCTYPE html>
<html>
<head>
    <meta charset="gb2312" />
    <script type="text/javascript">
        window.onerror=function(){return true;}
    </script>
    <script src="//mat1.gtimg.com/2014/ola2014/jquery.js"></script>
    <script src="//mat1.gtimg.com/2014/ola2014/crafty.js"></script>
    <style type="text/css" media="screen" id="test">
        /*pc.css*/
         body,div,ol,ul,h1,h2,h3,h4,h5,h6,p,th,td,dl,dd,form,iframe,input,textarea,select,label,article,aside,footer,header,menu,nav,section,time,audio,video {
      margin:0;
      padding:0;
    }
    article,aside,footer,header,hgroup,nav,section,audio,canvas,video,img {
        display: block;
    }
    body {
        font-size: 100%; 
        font-family:Helvetica,STHeiti,Droid Sans Fallback;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    textarea {
        resize: none;
    }
    iframe,img {
        border:0;
    }
    ul,ol {
        list-style:none;
    }
    input,
    select,
    textarea {
        outline: 0;
        -webkit-user-modify: read-write-plaintext-only;
    }
    input {
        -webkit-appearance: none;
    }
    a{
        text-decoration: none;
    }
    body,html{
        width: 100%; 
        height: 100%;
        overflow: hidden;
        margin: 0; padding: 0;
        /*background: #000;*/
        font-family:\u5fae\u8f6f\u96c5\u9ed1;
        /*background: #13a438;*/
    }
    #gamestart{
        width: 100%;
        position: absolute;
        top: 0; bottom: 0; 
        z-index: 11;
        display:none;
    }
    .start_bg {
        position: absolute;
        top: 0; left: 0; z-index: -1;
        width: 100%;
        background: url(//mat1.gtimg.com/joke/and/image/loading.gif) no-repeat center center;
    }
    #gamestart .btn,.zhiyin .btn {
        width: 80%;
        height: 60px;
        border-radius: 5px;
        text-align: center;
        line-height:60px;
        color: #333;
        box-shadow: 0 5px 0px #07942c;
        box-shadow: 0 5px 0px rgba(0,0,0,0.17);
        position: absolute;
        left: 50%; margin: 0 0 0 -40%;
        font-size:28px;cursor: pointer;
    }
    #gamestart .rule{
        background: #fff;
        bottom: 180px;
    }
    #gamestart .start,.zhiyin .start{
        background: #ffff00;
        bottom: 80px;
    }
    .zhiyin .start{
        bottom: 40px;
    }

    #interface {display: none; position: relative; z-index: 2;}
    #interface .life {position: absolute; right: 5px; top: 10px; font: 900 16px/23px '微软雅黑'; text-indent: 27px; background: url(//mat1.gtimg.com/2014/ola/game/m_img/life_s_2.png) no-repeat;  background-size: 23px; color: #ffea00; z-index:11; height:23px;}

        #gamescore {font:900 20px/30px \u5fae\u8f6f\u96c5\u9ed1; color:#FF0; text-align: center; margin-top:30%;}
        #gamescore span {display: block; font-size:60px; line-height: 60px !important;}
        .athour {
        width: 100%; text-align: center; padding: 10px 0;
        position: absolute;
        left: 0; bottom: 0;
    }
    .athour span{
        font-size: 22px;
        color: #1c5b35;
    }
    .athour span:nth-of-type(1){
        padding-right: 10px;
    }

.ruleshadow{
        position: absolute;
        top: 0; right: 0; bottom: 0; left: 0;
        background:rgba(0,0,0,0.8);
        z-index: 10;
        display: none;
    }
.rulebox{
        width: 360px; height: 560px;
        padding: 10px 15px;
        position: absolute;
        left: 50%; top: 50%;
        margin: -280px 0 0 -195px;
        background: #13a438;
        border-radius: 10px;
        opacity: 0; z-index: -1;
        -webkit-transform: translate3d(0,0,0);
        -webkit-transform-style: preserve-3d;
        -webkit-backface-visibility: hidden;
    }
    .x_rulebox{
        width: 55px; height: 55px;
        display: block;
        position: absolute;
        right: -15px;
        top: -20px;
        background: url(//mat1.gtimg.com/2014/ola/images/x_rulebox.png) no-repeat left top;
        background-size: 100%;
    }
    .rulebox h3{
        color: #ffff00;
        font-size: 28px;
        font-weight: normal;
        padding: 6px 0;
        margin: 0;
    }
    .rulebox p{
        color: #fff;
        font-size: 26px;
        line-height: 40px;
        margin: 0;
    }
    .daoju_1{
        display: inline;
        float: left;
        width: 80px; height: 80px;
        background: url(//mat1.gtimg.com/2014/ola/images/daoju_1.png) no-repeat left top;
        background-size: 100%;
    }
    .daoju_2{
        display: inline;
        float: left;
        width: 84px; height: 94px;
        background: url(//mat1.gtimg.com/2014/ola/images/daoju_2.png) no-repeat left top;
        background-size: 100%;
    }
     .daoju_3{
        display: inline;
        float: left;
        width: 68px; height: 92px;
        background: url(//mat1.gtimg.com/2014/ola/images/daoju_3.png) no-repeat left top;
        background-size: 100%;
    }
    .daoju_item{
        padding: 8px 0;
        width: 100%;
        overflow: hidden;
    }
    .daoju_item p{
        line-height: 40px;
        padding-left: 90px;
    }
    .opacity{
    opacity: 1;
}
.r_index{
        z-index: 11;
    }
    @-webkit-keyframes bounceIn {
  0% {
    opacity: 0;
    -webkit-transform: scale(.3);
    transform: scale(.3);
  }

  50% {
    opacity: 1;
    -webkit-transform: scale(1.05);
    transform: scale(1.05);
  }

  70% {
    -webkit-transform: scale(.9);
    transform: scale(.9);
  }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    transform: scale(1);
  }
}

@keyframes bounceIn {
  0% {
    opacity: 0;
    -webkit-transform: scale(.3);
    -ms-transform: scale(.3);
    transform: scale(.3);
  }

  50% {
    opacity: 1;
    -webkit-transform: scale(1.05);
    -ms-transform: scale(1.05);
    transform: scale(1.05);
  }

  70% {
    -webkit-transform: scale(.9);
    -ms-transform: scale(.9);
    transform: scale(.9);
  }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
  }
}
.animated {
  -webkit-animation-duration: 1s;
  animation-duration: 1s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}
.bounceIn {
  -webkit-animation-name: bounceIn;
  animation-name: bounceIn;
}

@-webkit-keyframes bounceOut {
  0% {
    -webkit-transform: scale(1);
    transform: scale(1);
  }

  25% {
    -webkit-transform: scale(.95);
    transform: scale(.95);
  }

  50% {
    opacity: 1;
    -webkit-transform: scale(1.1);
    transform: scale(1.1);
  }

  100% {
    opacity: 0;
    -webkit-transform: scale(.3);
    transform: scale(.3);
  }
}

@keyframes bounceOut {
  0% {
    -webkit-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
  }

  25% {
    -webkit-transform: scale(.95);
    -ms-transform: scale(.95);
    transform: scale(.95);
  }

  50% {
    opacity: 1;
    -webkit-transform: scale(1.1);
    -ms-transform: scale(1.1);
    transform: scale(1.1);
  }

  100% {
    opacity: 0;
    -webkit-transform: scale(.3);
    -ms-transform: scale(.3);
    transform: scale(.3);
  }
}

.bounceOut {
  -webkit-animation-name: bounceOut;
  animation-name: bounceOut;
}
.zhiyin {
    position: absolute;
    display: none;
    width: 100%;
    top: 0;
    bottom: 0;
    z-index: 11;
    background: #03250c url(//mat1.gtimg.com/2014/ola/images/zhiyin.png) no-repeat left top;
    background-size: 100%;
}
.daojishi {
    position: absolute;
    width: 100%;
    top: 0;
    bottom: 0; display: none;
    z-index: 11;
    background: url(//mat1.gtimg.com/2014/ola/images/daojishu_bg.png) repeat left top;
    background-size: 100%;
}
.daojishiline{
    width: 100%;
height: 120px;
position: absolute;
top: 168px;
left: 0;
background: #ffe400;
z-index: 1;
}
.daojishibox{
    width: 240px;
height: 240px;
position: absolute;
left: 50%;
top: 102px;
margin: 0 0 0 -120px;
background: url(//mat1.gtimg.com/2014/ola/images/daojishibox.png) no-repeat left top;
background-size: 100%;
z-index: 2;
}
.daojishipangzi {
    width: 222px;
    height: 204px;
    position: absolute;
    left: 50%; bottom: 50px;
    margin: 0 0 0 -111px;
    background: url(//mat1.gtimg.com/2014/ola/images/daojishipangzi.png) no-repeat left top;
    background-size: 100%;
    z-index: -1;
}
.daojishinum{
    width: 100%;
text-align: center;
font-size: 120px;
color: #00a944;
padding: 80px 0 0 0;
line-height: normal;
}
.gameoverbox{
    width:640px;
    height:170px;
    background:url(//mat1.gtimg.com/2014/ola/images/gameover.png) no-repeat center center;
    position:absolute;
    left:50%;
    top:50%;
    background-size:100%;
    margin: -85px 0 0 -320px;
    display:none;
    z-index:13;
}   

.gameend{
    position: absolute;
    width: 100%;
    top: 0; bottom: 0;z-index: 11;
    background: #08b134 url(//mat1.gtimg.com/2014/ola/images/game_end.png) no-repeat center top;
    background-size: 100%;
    display:none;

}
.game_fenshu {
    width: 100%;
text-align: center;
padding: 40px 0 0;
font-size: 46px;
color: #ffff00;
}
.game_fenshu span {
    font-size: 100px;
}
.game_paiming {
   color: #ffff00;
font-size: 36px;
text-align: center;
display: none;
}
#jiantou{ display: none;}

.game_ogain{
    width: 80%;
height: 60px;
border-radius: 10px;
text-align: center;
line-height: 60px;
background: #ffff00;
color: #333;
box-shadow: 0 10px 0px #07942c;
box-shadow: 0 10px 0px rgba(0,0,0,0.17);
position: absolute;
left: 50%;
bottom: 140px;
margin: 0 0 0 -40%;
font-size: 28px;
cursor: pointer;
}
.game_chakan{
    width: 36%;
height: 60px;
border-radius: 10px;
text-align: center;
line-height: 60px;
background: #0047c5;
color: #fff;
box-shadow: 0 10px 0px #07942c;
box-shadow: 0 10px 0px rgba(0,0,0,0.17);
position: absolute;
left: 10%;
bottom: 40px;
font-size: 28px;
cursor: pointer;
}
.game_share{
    width: 36%;
height: 60px;
border-radius: 10px;
text-align: center;
line-height: 60px;
background: #f8317c;
color: #fff;
box-shadow: 0 10px 0px #07942c;
box-shadow: 0 10px 0px rgba(0,0,0,0.17);
position: absolute;
right: 10%;
bottom: 40px;
font-size: 28px;
cursor: pointer;
}

.listwarp{
    background: #0b9f31;
    position: absolute;
    top: 0; bottom: 0;
    width: 100%;
    z-index: 11;
    display:none;
}
.listcent{
    width: 400px;
position: absolute;
left: 50%;
top: 30px;
bottom: 0;
margin: 0 0 0 -200px;
}
.listtab{
    width: 100%;
height: 50px;
}
.listtab li {
    width: 50%;
display: inline;
float: left;
height: 50px;
line-height: 50px;
text-align: center;
color: #fff;
font-size: 24px;
cursor: pointer;
}
.listtab li.current{
    color: #0b9f31;
    background: #d1f8db;
}
.listbox{
    overflow: hidden;
    display: none;
} 
.listbox ul{
    margin-top: -1px;
    /*background: #d1f8db;*/
} 
.show{
    display: block;
}
.listbox li {
    height: 60px;
line-height: 60px;
border-top: 1px solid #fff;
border-bottom: 1px solid #a5ddb3;
} 
.listbox li i{
    font-size: 18px;
display: inline;
float: left;
color: #ff4e00;
font-style: normal;
width: 40px;
text-align: center;
padding: 0 10px;
} 
.listbox li img{
    width: 48px;
height: 48px;
display: inline;
float: left;
margin: 8px 5px 0;
}
.listbox li strong{
    padding: 0 10px;
    font-weight: 400;
    font-size: 18px;
    color: #333;
    width: 140px;
    height:60px;
    line-height: 60px;
    overflow: hidden;
    display: inline;
    float: left;
    word-wrap: break-word;
    text-overflow:ellipsis;

}
.listbox li span{
    color: #0b9f31;
font-size: 18px;
display: inline;
float: left;
width: 80px;
padding: 0 10px;
text-align: left;
}
.listbox li.current{
    background: #88e5a0;
    border: none;
}
#huojiang_list li img{
    margin: 8px 20px 0;
}
#huojiang_list li strong{
    width:140px;
}
#huojiang_list li span{
    width: 120px;
}


.guizetxt{
    font-size: 20px;
    color: #fff;
    padding: 10px 0;
    line-height: 30px;
    position: absolute;
    bottom: 0;
    width: 100%;
    left: 0;
}
.share_1{
    width: 45%;
    height: 60px;
    border-radius: 10px;
    text-align: center;
    line-height: 60px;
    background: #f8317c;
    color: #fff;
    box-shadow: 0 10px 0px #07942c;
    box-shadow: 0 10px 0px rgba(0,0,0,0.17);
    position: absolute;
    left: 0%;
    bottom: 40px;
    font-size: 28px;
    cursor: pointer;
}
.again_1{
    width: 45%;
    height: 60px;
    border-radius: 10px;
    text-align: center;
    line-height: 60px;
    background: #ffff00;
    color: #333;
    box-shadow: 0 10px 0px #07942c;
    box-shadow: 0 10px 0px rgba(0,0,0,0.17);
    position: absolute;
    right: 0%;
    bottom: 40px;
    font-size: 28px;
    cursor: pointer;
}
.QQloading{
    width: 92px; height: 92px;
    position: absolute;
    left: 50%; top: 120px;
    margin: 0px 0 0 -46px;display:inline-block;
    background-position: left top;
}
.QQloading,.QQloading i{
    background-image:url(//mat1.gtimg.com/www/mobi/image/loading.png);
    background-repeat:no-repeat;display:inline-block;
}
.QQloading i {
    width: 92px; height: 92px;
    background-position: right top;
    -webkit-animation-name: rotateRight;
    -webkit-animation-duration:2s;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-timing-function:linear;
}
@-webkit-keyframes rotateRight {
   from {-webkit-transform:rotate(360deg);}
   to {-webkit-transform:rotate(0deg);}
}
.listbox li .QQloading i{
    width: 92px;
    padding: 0;
    float: none;
    display: block;
}
.listinner{
    position: absolute;
top: 50px;
bottom: 110px;
width: 100%;
}
#paihang_list,#huojiang_list{
   position: absolute;
overflow: hidden;
top: 0;
bottom: 80px;
width: 100%;
background: #d1f8db;
}
.scroll{
    position: absolute;
    width: 100%;

}
.sharebox{
    background: #f6f6f6;
    height:264px; overflow: hidden;
    width: 100%;
    position: absolute;
    top: -264px;
    /*display: none;*/
    z-index: 13;
}
.sharebox ul{
    height: 66px;
    padding: 60px 0;
    width: 424px;
    margin: 0 auto; overflow: hidden;
}
.sharebox ul li {
    display: inline; float: left;
    width: 66px; height: 66px; overflow: hidden;
    margin: 0 20px;
    background: url(//mat1.gtimg.com/www/mobi/image/sheraicon.png);
    background-repeat: no-repeat;
}
.sharebox p {
    width: 100%; font-size: 28px;
    height:60px; line-height:60px;
    border-top:solid 1px #c2c2c2;
    background:#dadada; 
    text-align:center; 
    color: #333;
    cursor: pointer;
}
.sharebox p:hover{
	background:#ccc
}
.sharebox ul li.sharet {
background-position: 0 0;
}
.sharebox ul li.shareqzone {
background-position: -66px 0;
}
.sharebox ul li.sharewb {
background-position: -132px 0;
}
.sharebox ul li.shareqq {
background-position: -264px 0;
}

.weblogin{
    display:none;
    width:622px; height:368px;
    position:absolute;
    top:50%;left:50%;
    margin: -184px 0 0 -311px;
    z-index:999;
}

.chenghao {
    width: 100%;
    height: 66px;
    line-height: 44px;
    text-align: center;
    position: absolute;
    top: 200px;
    left: 0;
    background: url(//mat1.gtimg.com/2014/ola/images/chenghao_title_bg.png) no-repeat center top;
    background-size: 100%;
    font-size: 24px;
    color: #ffff00;

}
.chenghao span {
    font-size: 24px;
    text-align: center;
    color: #ffff00;
}

.listtab .hide{
    display: none;
}

.ola_erweima{
    position:absolute;
    top:0;left:0;bottom:0;
    width:100%;
    z-index:13;
}
.ola_erweimabg{
    position: absolute;
    top: 0;
    bottom:0;
    z-index: -1;
    width: 100%;
    background: url(//mat1.gtimg.com/2014/ola2014/erweima_bg_small.png) no-repeat top center;
}
.ola_erweima .ola_denglu_tip{
    font-size:20px;
    text-align:center;
    margin-top:160px;
}
.ola_denglu{
    width: 160px;
    height: 60px;
    border-radius: 10px;
    text-align: center;
    line-height: 60px;
    background: #f8317c;
    color: #fff;
    box-shadow: 0 10px 0px #07942c;
    box-shadow: 0 10px 0px rgba(0,0,0,0.17);
    position: absolute;
    left: 50%; top:200px;
    font-size:28px;
    cursor:pointer;
    margin:0 0 0 -80px;z-index:14;
}
.ola_erweimabox{
    width: 240px;
    height: 240px;
    position: absolute;
    z-index: -1;
    top: 60px;
    left: 50%;
    margin: 0 0 0 -120px;
}
.erweima_icon{
    position: absolute;
    right: 30px;
    top: 300px;
    width: 100px;
    height: 73px;
    z-index: 13;
    background: url(//mat1.gtimg.com/2014/ola2014/erweima_icon_small.png) no-repeat left top;
}


#browser-support {
    display: none;
    width: 440px;
    color: #FFF;
    position: absolute;
    z-index: 13;
    top:0;
    bottom:0;
    left:50%;
    margin:0 0 0 -220px;
}
.browser-support_bg{
    width: 100%; _height:633px;
    background: #11479f url(//mat1.gtimg.com/2014/ola/images/game_error_index.jpg) top center no-repeat;
    position: absolute;
    z-index: -1;
    left:0;
    top:0;bottom:0;
}
#supportTitle {
    font-size:18px!important;
    line-height: 30px;
    color:#dae424;
    text-align: left !important;
}

#supportTitle {
    width:420px; padding:10px;
    margin:5px auto;
    text-align: center;
    font-size: 0.8em;
}

#browser-support .qrcode {
    width:198px; height:198px;
    position: absolute;
    top:210px;
    left:50%;
    margin:0 0 0 -99px;
}

#browser-support .download {
    margin-top: 400px;
    font-size: 24px;
    text-align:center;
}

#browser-support p.em {
    font-size: 1.3em;
}

#browser-support a {
    color:yellow;
    text-decoration: underline;
    margin-top: 10px;
    padding: 5px;
    font-size: 1.2em;
}

    #gamelevel {
        border:1px solid #FF0;
        border-radius: 5px;
        width: 66px;
        height: 23px;
        position: absolute;
        top: 10px;
        left: 10px;
        text-align: center;
        font-size: 14px;
        line-height: 23px;
        color: #f1fb03;
    }

    #shoottip {
        width:433px;
        position: absolute;
        z-index: 12;
        display: none;
    }
    .shootin {
        top:83px;
        background: url("//mat1.gtimg.com/2014/ola/game/s_img/Shootin.png") no-repeat;
        height: 247px;
        -webkit-transform-origin: top center;
        -ms-transform-origin: top center;
        transform-origin: top center;
        -webkit-animation-name: swing;
        animation-name: swing;
        -webkit-animation-duration: 1s;
        animation-duration: 1s;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
    }
    .shootout {
        top:197px;
        background: url("//mat1.gtimg.com/2014/ola/game/s_img/Shootout.png") no-repeat;
        height: 93px;
        -webkit-animation: 2s fadeOutUp ease-in-out infinite;
        animation: 2s fadeOutUp ease-in-out infinite;
    }
    @-webkit-keyframes fadeOutUp {
        0% {
            opacity: 1;
            -webkit-transform: translateY(0px);
            transform: translateY(0px);
        }
        50% {
            opacity: 0.9;
            -webkit-transform: translateY(-20px);
            transform: translateY(-20px);
        }
    }
    @keyframes fadeOutUp {
        0% {
            opacity: 1;
            -webkit-transform: translateY(0);
            -ms-transform: translateY(0);
            transform: translateY(0);
        }

        50% {
            opacity: 0.9;
            -webkit-transform: translateY(-20px);
            -ms-transform: translateY(-20px);
            transform: translateY(-20px);
        }
    }

    @-webkit-keyframes swing {
      20% {
        -webkit-transform: rotate(15deg);
        transform: rotate(15deg);
      }

      40% {
        -webkit-transform: rotate(-10deg);
        transform: rotate(-10deg);
      }

      60% {
        -webkit-transform: rotate(5deg);
        transform: rotate(5deg);
      }

      80% {
        -webkit-transform: rotate(-5deg);
        transform: rotate(-5deg);
      }

      100% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
    }

    @keyframes swing {
      20% {
        -webkit-transform: rotate(15deg);
        -ms-transform: rotate(15deg);
        transform: rotate(15deg);
      }

      40% {
        -webkit-transform: rotate(-10deg);
        -ms-transform: rotate(-10deg);
        transform: rotate(-10deg);
      }

      60% {
        -webkit-transform: rotate(5deg);
        -ms-transform: rotate(5deg);
        transform: rotate(5deg);
      }

      80% {
        -webkit-transform: rotate(-5deg);
        -ms-transform: rotate(-5deg);
        transform: rotate(-5deg);
      }

      100% {
        -webkit-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        transform: rotate(0deg);
      }
    }

    #warning {
        position: absolute;
        z-index: 11;
        top:38.2%;
        left:0;
        width:433px;
        height:99px;
        background: url(//mat1.gtimg.com/2014/ola/game/s_img/Warning.png) no-repeat;
        display: none;
    }

    .warning {
        -webkit-animation: 1s fadeOutUp ease-in-out infinite;
        animation: 1s fadeOutUp ease-in-out infinite;
    }

    @-webkit-keyframes fadeOutUp {
        0% {
            opacity: 1;
        }
        50% {
            opacity: 0.5;
        }
    }
    @keyframes fadeOutUp {
        0% {
            opacity: 1;
        }

        50% {
            opacity: 0.5;
        }
    }
    </style>
</head>
<body>
    <div class="ola_erweima">
        <div class="ola_erweimabg">
            <p class="ola_denglu_tip">登录后才可以游戏哦!</p>
            <div class="ola_denglu">登录</div>
            <div class="ola_erweimabox"></div>
            <div class="erweima_icon"></div>
        </div>
    </div>  
    <div id="gamestart">
        <img src="//mat1.gtimg.com/2014/ola/images/game_start.jpg" class="start_bg">
        <div id="_gameload">加载进度：<span>0%</span></div>
        <div class="btn rule" id="_gamerule">查看规则</div>
        <div class="btn start" id="_gamestart">开始游戏</div>
        <div class="athour">
            <span>出品:腾讯体育</span>
            <span>创意:腾讯网设计中心</span>
        </div>
        <div class="ruleshadow"></div>
        <div class="rulebox">
            <span class="x_rulebox"></span>
            <h3>操作方法：</h3>
            <p>点击手机上的方向箭头，控制人物带球奔跑的方向。</p>
            <h3>道具说明：</h3>
            <div class="daoju">
                <div class="daoju_item">
                    <span class="daoju_1"></span>
                    <p>每收集一个，生命值+1；触碰障碍物，生命可再复活。</p>
                </div>
                <div class="daoju_item">
                    <span class="daoju_2"></span>
                    <p>每收集一个，能力值+1；扫除面前一切障碍，加速前进。</p>
                </div>
                <div class="daoju_item">
                    <span class="daoju_3"></span>
                    <p>触碰锥桶，生命值-1；成功绕过一次分数+1。</p>
                </div>
                
            </div>
        </div>
    </div>
<!--规则说明/S-->
<div class="zhiyin">
    <div class="btn start" id="_gamestart2">继续游戏</div>
</div>  
<!--规则说明/E-->
<!-- 倒计时/S -->
    <div class="daojishi">
        <div class="daojishiline"></div>
        <div class="daojishibox">
            <div class="daojishinum">3</div>
        </div>
        <div class="daojishipangzi"></div>
    </div>
<!-- 倒计时/E -->
<div class="gameoverbox"></div>
<!-- 游戏结束/S -->
<div class="gameend">
    <div class="game_fenshu">
        <span></span>分
    </div>
    <div class="game_paiming">
        总排名:<span></span><i id="jiantou">(<i></i>)</i>
    </div>
    <div class="chenghao">恭喜您获得称号：<span></span></div>
    <div class="game_ogain" id="game_ogain">再次游戏</div>
    <div class="game_chakan">查看排名</div>
    <div class="game_share">分享战绩</div>
</div>
<!-- 游戏结束/E -->
<!-- 排行榜/获奖名单/S -->
<div class="listwarp">
    <div class="listcent">
        <div class="listtab">
            <ul>
                <li class="current">好友排行榜</li>
                <li class="hide">上期获奖名单</li>
            </ul>
        </div>
        <div class="listinner">
            <div class="listbox show">
            <div id="paihang_list">
                <div class="scroll">
                    <ul>
                        <li style="min-height:112px;position:relative;border:none;height:590px;">
                            <div class="QQloading"><i></i></div>
                        </li>
                    </ul>
                </div>
            </div>    
            <p class="guizetxt">排行规则：得分相同的情况下，参与游戏时间越早排名越靠前。</p>
            </div>

            <div class="listbox">
                <div id="huojiang_list">
                    <div class="scroll">
                        <ul>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                            <li>
                                <img src="//mat1.gtimg.com/joke/ola2014/image/pic.jpg">
                                <strong>阿库纳玛塔塔</strong>
                                <span>5626</span>
                            </li>
                        </ul>
                    </div>
                </div> 
                <p class="guizetxt">抽奖规则：每日游戏并登录分享的玩家均可参加抽奖，每日抽出三名用户，奖励为XXXXX。</p>
            </div>
        </div>
        <div class="share_1">分享战绩</div>
        <div class="again_1">再次游戏</div>
    </div>
</div>
<!-- 排行榜/获奖名单/E -->
<!-- ptlogin/S -->
<!--<div class="weblogin">
    <iframe id="loginFrame" height="100%" scrolling="no" width="100%" frameborder="0" src=""></iframe>
</div>-->
<!-- ptlogin/E -->
<div class="sharebox">
    <ul>
        <li class="sharet"></li>
        <li class="shareqzone"></li>
        <li class="shareqq"></li>
        <li class="sharewb"></li>
    </ul>
    <p>取消</p>
</div>
    <div id="cr-stage">
            <div id="interface"><div class="life"></div></div>
            <div id="gamescore">本次得分<span>0</span></div>
            <div id="shoottip"></div>
            <div id="warning"></div>
            <div id="gamelevel"></div>
    </div>
<div id="browser-support">
    <div class="browser-support_bg"></div>
    <div id="supportTitle">
        你的浏览器太旧了，不能玩Ola快跑的游戏，你可以选择：
    </div>
    <div id="supportContent">
    <p class='qrcode'><img src="//mat1.gtimg.com/2014/ola/images/ola_m_qr.png" /></p>
    <div class="download">
        <p>下面的链接都来自官网，请放心下载</p>
        <p><a href="http://dlql.qq.com/dl_dir.qq.com/invc/tt/QQBrowser_Setup_Wireless.exe" target="_blank">QQ浏览器（请使用极速模式）</a></p>
    </div>
    </div>
</div>
<script>
document.domain = "qq.com";
//Cookie    
var Cookie = {
    set: function(e, t, n, r, i) {
        typeof n == "undefined" && (n = new Date((new Date).getTime() + 36e5)),
        document.cookie = e + "=" + escape(t) + (n ? "; expires=" + n.toGMTString() : "") + (r ? "; path=" + r : "; path=/") + (i ? ";domain=" + i : "")
    },
    get: function(e) {
        var t = document.cookie.match(new RegExp("(^| )" + e + "=([^;]*)(;|$)"));
        return t != null ? unescape(t[2]) : null
    },
    clear: function(e, t, n) {
        this.get(e) && (document.cookie = e + "=" + (t ? "; path=" + t : "; path=/") + (n ? "; domain=" + n : "") + ";expires=Fri, 02-Jan-1970 00:00:00 GMT")
    }
};

var Getqquidtime = setInterval(function(){
    if(Cookie.get("uin")){
        clearInterval(Getqquidtime)
        window._qquid = Number(Cookie.get("uin").substring(1));
    }
},300);
 BossTJ1 = new Image(1, 1);
var olaBoss ={
    updata: function(name) {
	    var ola_q = document.cookie.match(new RegExp('(^|)o_cookie=([^;]*)(;|$)'));
	    var ola_quin=(ola_q==null?"":unescape(ola_q[2]));
        BossTJ1.src = '//btrace.qq.com/collect?sIp=&iQQ='+ola_quin+'&sBiz=new.qq.com&sOp='+encodeURIComponent(name)+'&iSta=&iTy=1445&iFlow=&sSite=&sUrl=&sLocalUrl=&'+Math.random()
    }
}

</script>
<!--[if lte IE 8]>
  <script>
    $("#browser-support").show();
  </script>
<![endif]-->


<script>
/*脚本放到页面维护*/

/*<<<<<<<<<<<<游戏配置>>>>>>>>>>>>>>>>>>**/
var path = 'http://2014.qq.com/olarun'  // 域名
var game_path = '//mat1.gtimg.com/2014/ola/game/m_img/'; // 游戏素材载入路径
var socketIP = {
    IP : 'http://112.90.141.222:8080'
}


/* 获取URL参数 */
function getQueryStringByName(name){ 
    var result = location.search.match(new RegExp("[\?\&]" + name+ "=([^\&]+)","i")); 
    if(result == null || result.length < 1){ 
        return ""; 
    } 
    return result[1]; 
} 
/*<<<<<<<<<<<<游戏配置结束>>>>>>>>>>>>>>>>>>*/

/*<<<<<<<<<<<<游戏主要部分>>>>>>>>>>>>>>>>>>**/
Crafty.config = {
    speed: 6,               // 移动速度
    score: 0,               // 初始化分数
    level: 0,               // 关卡数
    addemeny: true,        // 障碍开关
    supertime: 0,           // 无敌距离(可连续增加)
    acceleration:2,          // 加速度
    gamestart: false,        // 游戏是否已经开始
    levelstats:0            // 对外展示的关卡数（用户体验用，实际关的13579对应12345）
}


$(function() {
    $.map(['_olagame','_olaviewW','_olaviewH'],function(n){
        if(window[n]){
            console.log('游戏命名空间错误，请保留ola的游戏变量名');
            Crafty.GameError = true;
            return false;
        }
    })

    if(!Crafty.GameError){
        window._olagame = null;
        window._olaviewW = 433;
        window._olaviewH = 632;
        Crafty.init(window._olaviewW, window._olaviewH);
        Crafty.canvas.init();
        Crafty.canvas._canvas.style.zIndex = '10';
        Crafty.scene("Loading");
    }

    var qquidtime = setInterval(function(){
        if(window._qquid){
            Crafty.config.uid = window._qquid;
            clearInterval(qquidtime);
        }
    },300)
});

Crafty.extend({
    startScore: function(){
        // 坚持1秒得5分
        window._olagame = setInterval(function(){
            Crafty.config.score ++;
            $("#gamescore span").text(Crafty.config.score);
            if(Crafty.config.score - (Crafty.config.levelstats * 100) > 100){
                Crafty("Player").die();
                Crafty.trigger('GameOver', 0);
            }
        },200);
    },
    stopScore: function(){
       clearInterval(window._olagame); 
    },
    setDirection: function(dire){
        if(!Crafty.config.uid) return false;
        if(dire.k = Crafty.config.uid){
            var player = Crafty("Player");
            if(Crafty.config.gamestart){
                if(!player.archer){     // 奇数关卡移动
                    if(dire.d == "top_start") player._movement.y = -player.movementSpeed;

                    if(dire.d == "bottom_start") player._movement.y = player.movementSpeed;

                    if(dire.d.indexOf('top_')>=0 || dire.d.indexOf('bottom_')>=0){
                        player._movement.x = 0;
                    }

                    if(dire.d == "left_start") player._movement.x = -player.movementSpeed;

                    if(dire.d == "right_start") player._movement.x = player.movementSpeed;

                    if(dire.d.indexOf('left_')>=0 || dire.d.indexOf('right_')>=0) player._movement.y = 0;

                    if(dire.d.indexOf('_end') > 0){
                        player._movement.x = 0;
                        player._movement.y = 0;
                    }

                    player.trigger('NewDirection', player._movement);
                }else{      // 偶数关起射门与移动
                    if(dire.d == "top_end"){
                        var e = {
                            key:38,
                            keyCode:38,
                            type:"keydown"
                        }
                        Crafty("Player").trigger('Interaction',e);
                    }

                    if(dire.d == "left_start") player._movement.x = -12;

                    if(dire.d == "right_start") player._movement.x = 12;

                    player._movement.y = 0;

                    if(dire.d.indexOf('_end') > 0){
                        player._movement.x = 0;
                        player._movement.y = 0;
                    }

                    player.trigger('NewDirection', player._movement);
                }
            }else{
                if(dire.d == "game_ready"){
                    $("#ola_erweima").remove();
                }
                
                if(dire.d == "game_start"){
                    $("#_gamestart").trigger('click');
                    if(window._olasocket){
                        window._olasocket.emit('act',{k:window._qquid,d:'game_rule_mobile',s:null});
                    }
                }

                if(dire.d == "game_rule"){
                    $("#_gamestart2").trigger('click');
                    if(window._olasocket){
                        window._olasocket.emit('act',{k:window._qquid,d:'game_playing_mobile',s:null});
                    }
                }


                if(dire.d == "game_over"){
                    if(window._olasocket){
                        window._olasocket.emit('act',{k:window._qquid,d:'game_start_mobile',s:null});
                        window.location.href = window.location.href + "&qr=1";
                    }
                }
            }
        }
    }
})

Crafty.c("Player", {
    hp: {
        current: 3, // 初始3条生命
        max: 10 // 最多10条生命
    },
    movementSpeed: Crafty.config.speed + Math.ceil(Crafty.config.level / 2),
    super: false,
    archer: false,
    lives: 3,
    ship: "Qiuyuan",
    supership: "Qiuyuan_Super_Pic",
    shootship: "Qiuyuan_Shoot_Pic",
    collisionship: "Qiuyuan_Collision_Pic",
    runout: false,
    init: function() {
        var stage = $('#cr-stage');
        this.requires("2D,DOM,SpriteAnimation,"+this.ship+",Multiway,Keyboard,Tween,Collision")
        .attr({
            x: Crafty.viewport.width/2-this.w/2,
            y: Crafty.viewport.height - this.h - 35,
            z:9,
            dynamic: true
        })
        .collision(new Crafty.polygon([13,58],[27,58],[33,69],[40,69],[43,47],[33,23],[54,9],[77,14],[77,42],[81,67],[83,74],[65,84],[33,72],[24,85],[12,85],[4,70]))
        .reel('PlayerMovingLeft', 450, [[0,0],[0,1],[0,2],[0,3]])
        .reel('PlayerMovingRight',  450, [[1,0],[1,1],[1,2],[1,3]])
        .animate('PlayerMovingLeft', -1)
        .multiway(this.movementSpeed, {UP_ARROW: -90, DOWN_ARROW: 90, RIGHT_ARROW: 0, LEFT_ARROW: 180});    // 角度
        this.bind('Moved',function(from) {
            if(this.x+this.w > Crafty.viewport.width ||
                this.x+this.w < this.w || 
                this.y+this.h-15 < this.h || 
                this.y+this.h+15 > Crafty.viewport.height){
                this.attr({
                    x:from.x, 
                    y:from.y
                });
            }
        }).bind("KeyDown",function(e){
            if(this.has(this.shootship)){
                if(e.keyCode == 38 || e.keyCode == 32){
                    var ball = Crafty('Ball');
                    ball.animate("Running",-1);
                    ball.shooting = true;
                    return false;
                }
            }
        }).bind("EnterFrame",function(frame) {
            // 当发现草皮停止滚动的时候
            // 认为球员到达球门前，准备开始射门
            if(Crafty.config.GoalBackGround && this.archer){
                if(!this.has(this.shootship)){
                    this.initArcher();
                }
            }

            // 球员跑出草地
            if(this.runout){
                this.y -= 15;

                if(this.y < - Crafty.viewport.height){
                    this.destroy();
                }
            }
            // 实时更新血量
            Crafty.trigger("UpdateStats", this.hp);
        }).bind("Interaction",function(e) {
            if(this.has(this.shootship)){
                if(e.keyCode == 38 || e.keyCode == 32){
                    var ball = Crafty('Ball');
                    ball.animate("Running",-1);
                    ball.shooting = true;
                    return false;
                }
            }
        }).bind("Hurt",function(that) {
            var self = this;
            // 销毁一切触碰的障碍物
            that.destroy();
            if(!Crafty.config.changeing){
                if (that.gettype() == 'jersey') {
                    if (this.hp.current < this.hp.max && this.hp.current >= 0) {
                        this.hp.current++;
                    }
                }else if (that.gettype() == 'broom' && !this.super) {
                    this.toggleComponent(this.ship, this.supership);
                    this.css("background","url('"+game_path+"QiuyuanSuper.png')")
                    Crafty.config.backtime = Crafty.config.acceleration;
                    Crafty.config.acceleration = 10;
                    this.super = true;
                    window._olatimerout = setTimeout(function(){
                        Crafty.config.acceleration = Crafty.config.backtime;
                        self.toggleComponent(self.ship, self.supership);
                        self.css("background","url('"+game_path+"Qiuyuan.png')");
                        Crafty.config.backtime = undefined;
                        self.super = false;
                    },3000);
                }else if (that.gettype() == 'pile' && !this.super) {
                    var that = this;
                    that.hp.current--;
                    if(that.has(that.ship)){
                        that.toggleComponent(that.ship, that.collisionship);
                        that.css("background","url('"+game_path+"QiuyuanCollision.png')")
                    }
                    setTimeout(function(){
                        if(that.has(that.collisionship)){
                            that.toggleComponent(that.collisionship, that.ship);
                            that.css("background","url('"+game_path+"Qiuyuan.png')")
                        }
                    },618)
                }
            }

            if (this.hp.current <= 0) {
                Crafty.trigger("UpdateStats", this.hp);
                this.die();
            }
        })
        return this;
    },
    // 射手
    initArcher: function(){
        var that = this,
            ball;
        if(Crafty.config.GoalBackGround){
            this.addComponent(this.shootship);
            this.css("background","url('"+game_path+"QiuyuanShooting.png')")
            this.pauseAnimation();
            ball = Crafty.e('Ball');
            ball.attr({
                x:that.x + that.w/2 - ball.w/2,
                y:that.y - ball.h/2,
                z:3
            })
            .bind("EnterFrame",function(){
                this.x = that.x + that.w/2 - ball.w/2;
            });
        }
    },
    die: function() {
        Crafty.stopScore();
        Crafty.pause(true);
        Crafty.trigger('GameOver', Crafty.config.score);
    }
});

Crafty.c("Gameover",{
    init: function(){
        this.requires("2D,DOM,Image").attr({x: 0, y: window._olaviewH * 0.382, z: 9}).image(game_path+"Gameover_s.png", "no-repeat");
    }
});

Crafty.c("Enemy", {
    init: function() {
        var player = Crafty("Player");
        //所必须的模块
        this.requires("2D,DOM,Collision")
        //超出视窗的时候则销毁
        .bind("EnterFrame",function() {
            if (this.x > Crafty.viewport.width + this.w || this.x < -this.w || this.y < -this.h || this.y > Crafty.viewport.height + this.h) {
                this.destroy();
            }
        }).onHit("Player",function(ent) {
            Crafty(player[0]).trigger("Hurt", this);
        });
    },
    gettype: function() {
        return this.type;
    }
});

// 球桩可以阻碍球员前进，触碰到球员会闪动
Crafty.c("Pile", {
    type: "pile",
    init: function() {
        this.requires("Enemy,Pile_pic").attr({
            y: -this.h,
            x: Crafty.math.randomInt(this.w, Crafty.viewport.width - this.w),
            dynamic: true
        })
        .collision(new Crafty.polygon([0,39], [16, 0], [33, 39]))
        .bind("EnterFrame",function() {
            this.y += 2 * Crafty.config.acceleration;
        });
    }
});

// 会主动攻击球员的球桩，跟随球员轨迹移动
Crafty.c("Pile_attack", {
    type: "pile",
    init: function() {
        var player = Crafty("Player");
        this.requires("Enemy,Pile_pic").attr({
            y: -this.h,
            x: player.x,
            dynamic: true
        }).bind("EnterFrame",function() {
            player = Crafty(player[0]);
            if (this.y < 0) {
                this.y++;
            }

            if (this.x < player.x) {
                this.x++;
            }

            if (this.x > player.x) {
                this.x--;
            }

            this.y += 4 * Crafty.config.acceleration;
        });
    }
});

// 球衣能让用户再增加一条生命
Crafty.c("Jersey", {
    type: "jersey",
    init: function() {
        var player = Crafty("Player");
        this.requires("Enemy,Jersey_pic").attr({
            y: -this.h,
            x: Crafty.math.randomInt(0, Crafty.viewport.width - this.w),
            dynamic: true
        }).bind("EnterFrame",function() {
            this.y += 6;
        });
    }
});

// 扫把可以在300帧内让球员无敌
Crafty.c("Broom", {
    type: "broom",
    init: function() {
        var player = Crafty("Player");
        this.requires("Enemy,Broom_pic").attr({
            y: -this.h,
            x: Crafty.math.randomInt(0, Crafty.viewport.width - this.w),
            dynamic: true
        }).bind("EnterFrame",function() {
            this.y += 12;
        });
    }
});

// 球门线1
Crafty.c("Line",{
    init: function() {
        this.requires("2D, DOM, Line_pic")
        .attr({
            x: 0,
            y: -this.h - 120
        })
        .bind("EnterFrame",function() {
            if(this.y < Crafty.viewport.height + this.h - 120){
                this.y += 15;
            }
        });
    }
});

// 球门线2
Crafty.c("Line2",{
    init: function() {
        this.requires("2D, DOM, Line2_pic")
        .attr({
            x: 0,
            y: -this.h
        })
        .bind("EnterFrame",function() {
            if(this.y < Crafty.viewport.height - this.h){
                this.y += 15;
            }else{
                if(!Crafty.config.GoalBackGround){
                    // 球门线到底的时候，停止草皮滚动
                    Crafty.config.GoalBackGround = true;
                }
            }
        });
    }
});

// 球门背景
Crafty.c("GoalBackGround",{
    init: function() {
        this.requires("2D, DOM, Collision, GoalBackGround_pic")
        .attr({
            x: 0,
            y: - Crafty.viewport.height - 20,
            z:2
        })
        .bind("EnterFrame",function() {
            if(this.y < - 15){
                this.y += 15;
            }else{
                this.y = -15;
            }
        }).onHit("Ball",function() {
            //console.log('球门背景');
            Crafty("Ball").trigger("Hurt", this);
        });;
    }
});

// 球门
Crafty.c("Goal",{
    type: "Goal",
    init: function() {
        this.requires("2D, DOM, Collision, Goal_pic")
        .attr({
            x: Crafty.viewport.width/2-this.w/2,
            y: - Crafty.viewport.height + 16,
            z:3
        })
        .bind("EnterFrame",function() {
            if(this.y < 15){
                this.y += 15;
            }else{
                this.y = 15;
            }
        })
        .collision(new Crafty.polygon([45,21],[45,76],[175,76],[175,21]))
        .onHit("Ball",function() {
            //console.log('球门');
            Crafty("Ball").trigger("Hurt", this);
        });
    }
});

// 守门员
Crafty.c("Goalkeeper",{
    type:"Goalkeeper",
    turnleft: true,
    runing: false,
    init: function() {
        this.requires("2D, DOM, SpriteAnimation, Collision, Goalkeeper_pic")
        .attr({
            x: Crafty.viewport.width/2-this.w/2,
            y: - Crafty.viewport.height + 65,
            z:4
        })
        .reel('Running', 600, [[0, 0], [1, 0]]) // setup animation
        .bind("EnterFrame",function() {
            if(this.y < 65){
                this.y += 15;
            }else{
                this.y = 65;

                if(!this.runing){
                    this.runing = true;
                    this.animate('Running', -1)
                }

                if(Crafty("Ball").shooting){
                    if(this.x > Crafty("Ball").x - this.w/3 && this.x > Crafty.viewport.width/2-Crafty("Goal").w/2  && this.x < Crafty.viewport.width/2+Crafty("Goal").w){
                        if(this.x > Crafty("Ball").x - this.w/3){
                            this.x -= Number((Math.random()*3).toFixed(2));
                        }else{
                            this.x = Crafty("Ball").x - this.w/3;
                        }
                    }

                    if(this.x < Crafty("Ball").x - this.w/3 && this.x > Crafty.viewport.width/2-Crafty("Goal").w/2  && this.x < Crafty.viewport.width/2+Crafty("Goal").w){
                        if(this.x < Crafty("Ball").x - this.w/3){
                            this.x += Number((Math.random()*3).toFixed(2));
                        }else{
                            this.x = Crafty("Ball").x - this.w/3;
                        }
                    }
                }
            }
        }).onHit("Ball",function(ent) {
            //console.log('守门员');
            Crafty("Ball").trigger("Hurt", this);
        });
    }
});

// 足球
Crafty.c("Ball",{
    type: "ball",
    shooting: false,
    init: function() {
        this.requires("2D, DOM, SpriteAnimation, Collision, Ball_pic")
        .reel('Running', 200, [[0, 0], [1, 0]])
        .bind("EnterFrame",function() {
            if(this.shooting){
                this.y -= 15;
            }
        })
        .bind("Hurt", function(that){
            this.destroy();

            if(that.type == "Goal"){
                $("#shoottip").removeClass().addClass('shootin').fadeIn(function(){
                    //console.log('命中球门');
                    Crafty.config.score += 3;
                    setTimeout(function(){
                        $("#shoottip").fadeOut(function(){
                            setPoints()
                        });
                    },2000)
                });
            }else{
                $("#shoottip").removeClass().addClass('shootout').fadeIn(function(){
                    //console.log('没有命中');
                    if(--(Crafty("Player").hp.current) <= 0){
                        $("#shoottip").fadeOut(function(){
                            Crafty("Player").die();
                        });
                    }else{
                        Crafty.config.score += 1;
                        setTimeout(function(){
                            $("#shoottip").fadeOut(function(){
                                setPoints()
                            });
                        },2000)
                    }
                });
            }
        })
    }
});

// 球员
Crafty.sprite(92.5, 92.5, game_path + "Qiuyuan.png", {
    Qiuyuan: [0, 0]
});

// 球员变身超人
Crafty.sprite(92.5, 92.5, game_path + "QiuyuanSuper.png", {
    Qiuyuan_Super_Pic: [0, 0]
});

// 球员变身射手
Crafty.sprite(74, 80, game_path + "QiuyuanShooting.png", {
    Qiuyuan_Shoot_Pic: [0, 0],
});

// 球员被撞击
Crafty.sprite(92.5, 92.5, game_path + "QiuyuanCollision.png", {
    Qiuyuan_Collision_Pic: [0, 0],
});

// 木桩
Crafty.sprite(34, 47, game_path + "Pile.png", {
    Pile_pic: [0, 0]
});

// 球衣
Crafty.sprite(79, 79, game_path + "Jersey.png", {
    Jersey_pic: [0, 0]
});

// 扫把
Crafty.sprite(151, 150, game_path + "Broom.png", {
    Broom_pic: [0, 0]
});

// 球门线1
Crafty.sprite(433, 1, game_path + "Line_s.png", {
    Line_pic: [0, 0]
});

// 球门线2
Crafty.sprite(433, 42, game_path + "Line2_s.png", {
    Line2_pic: [0, 0]
});

// 球门
Crafty.sprite(216, 96, game_path + "Goal.png", {
    Goal_pic: [0, 0]
});

// 球门背景
Crafty.sprite(433, 103, game_path + "GoalBackGround_s.png", {
    GoalBackGround_pic: [0, 0]
});

// 守门员
Crafty.sprite(55, 56, game_path + "Goalkeeper.png", {
    Goalkeeper_pic: [0, 0]
});

// 足球
Crafty.sprite(31, 31, game_path + "Ball.png", {
    Ball_pic: [0, 0]
});
// 游戏加载
Crafty.scene("Loading",function() {
    var toLoad = [
            game_path + "Caopi.png",
            game_path + "Qiuyuan.png",
            game_path + "QiuyuanSuper.png",
            game_path + "QiuyuanCollision.png",
            game_path + "QiuyuanShooting.png",
            game_path + "Pile.png",
            game_path + "Jersey.png",
            game_path + "Broom.png",
            game_path + "Goalkeeper.png",
            game_path + "Goal.png",
            game_path + "Ball.png",
            game_path + "Line_s.png",
            game_path + "Line2_s.png",
            game_path + "GoalBackGround_s.png",
            game_path + "Gameover_s.png",
            game_path + "Shootin.png",
            game_path + "Shootout.png",
            game_path + "Warning.png"
        ];

    var ola_denglu = $(".ola_denglu");
    var button = $('#_gamestart'),
        curtain = $('#gamestart'),
        getrule = $('#_gamerule'),
        load = $('#_gameload'),
        begin =$("#_gamestart2"),
        guide = $('.zhiyin');

    if(getQueryStringByName("type") == 0){
        $(".ola_erweima").remove();
        $("#gamestart").show();
        if (Cookie.get('skey')) {
	        Passport.uin = Number(Cookie.get("uin").substring(1));
	        $(".ola_denglu_tip").hide();
            ola_denglu.hide();
	    }else{
		    ola_denglu.on("click",function(){
			    //window.registerZone2({bosszone:'wcglogin'})
			    olaBoss.updata("wcglogin");
                Passport.ptlogin();
            })
	    }
    }else if(getQueryStringByName("type") == 1){
        if(getQueryStringByName("qr") == 1){
            $(".ola_erweima").remove();
            $("#gamestart").show();
        }else{
            $(".ola_erweima").show(); 
        }
        if (Cookie.get('skey')) {
            Passport.uin = Number(Cookie.get("uin").substring(1));
            $(".ola_denglu_tip").hide();
            ola_denglu.hide();
            // get QRcode
            ola_ewm();
        }else{
            ola_denglu.on("click",function(){
                Passport.ptlogin();
            })
        }
    }
    window.codeback = function(data){
        $(".ola_erweimabox").html("<img src="+data.img+" width=240 height=240>");
    }
    //查看排名
    $('.game_chakan').click(function(){
	    //window.registerZone2({bosszone:'wcgrank'})
	    olaBoss.updata("wcgrank");
        Passport.check();
    });

    //分享战绩
    $('.game_share').click(function(){
        //window.registerZone2({bosszone:'wcgshare'})
        olaBoss.updata("wcgshare");
        share();
    });

    $('.share_1').click(function(){
        //window.registerZone2({bosszone:'wcgshare'})
        olaBoss.updata("wcgshare");
        share();
    });

    $(".game_ogain").click(function(){
        window._olasocket.emit('act',{k:qq_user_num,d:'game_restart_mobile',s:null});
        //window.registerZone2({bosszone:'wcgreplay'})
        olaBoss.updata("wcgreplay");
        window.location.reload();
    })

    $(".again_1").click(function(){
        window._olasocket.emit('act',{k:qq_user_num,d:'game_restart_mobile',s:null});
        //window.registerZone2({bosszone:'wcgreplay'})
        olaBoss.updata("wcgreplay");
        window.location.reload();
    })

    getrule.on('click',function() { // 查看游戏规则
    	//window.registerZone2({bosszone:'wcgrule'})
    	olaBoss.updata("wcgrule");
        // 规则弹出窗口动画
        $(".ruleshadow").show();
        $(".rulebox").addClass("bounceIn animated r_index");
        setTimeout(function(){
            $(".rulebox").addClass("opacity").removeClass("bounceIn animated")
        },800)
        // 关闭弹出窗口动画
        $(".x_rulebox").click(function(){
            $(".rulebox").addClass("bounceOut animated");
            setTimeout(function(){
                $(".ruleshadow").hide();
                $(".rulebox").removeClass("opacity bounceOut animated r_index")
            },800)
        });
    })

    Crafty.load(toLoad, function() {
        load.remove();
        if (Passport.uin) {
            window.qq_user_num = Passport.uin;
            var qq_str = (qq_user_num+"").split("");
            if(qq_str[qq_str.length-1] >0  && qq_str[qq_str.length-1] < 3){
                socketIP.IP = 'http://112.90.141.222:8080';
            }
            if(qq_str[qq_str.length-1] >2 && qq_str[qq_str.length-1] <6){
                socketIP.IP = 'http://112.90.141.222:8080';
            }
            if(qq_str[qq_str.length-1] >5 && qq_str[qq_str.length-1] <8){
                socketIP.IP = 'http://113.108.21.62:8080';
            }
            if(qq_str[qq_str.length-1] >7 && qq_str[qq_str.length-1] <10){
                socketIP.IP = 'http://113.108.21.62:8080';
            }
            $.getScript(socketIP.IP+'/socket.io/socket.io.js',function(){
                window._olasocket = io.connect(socketIP.IP);

                // 连接完成后提交加入事件，告诉该用户QQ
                window._olasocket.emit('set group', {
                    qq: qq_user_num
                });

                //收到控制事件后
                window._olasocket.on('get_control', function (data) {
                    if(getQueryStringByName("type") == 1){
                        if(data.d == "game_ready" && data.key == qq_user_num){
                            $(".ola_erweima").remove();
                            $("#gamestart").show();
                        }
                    }
                    if(data.d.indexOf("_mobile") < 0){
                        Crafty.setDirection(data);
                    }
                });

                // 关闭页面的时候关闭链接
                $("body").bind("unload",function(){
                    window._olasocket.leave(Passport.uin);
                });


                button.on('click', function(){
	                //window.registerZone2({bosszone:'wcgstart'})
	                olaBoss.updata("wcgstart");
                    curtain.hide();
                    guide.show(0,function(){
                        begin.on('click', function() {
	                        //window.registerZone2({bosszone:'wcgcontinue'})
	                        olaBoss.updata("wcgcontinue");
                            var begintime,num = 3;
                            guide.hide();
                            $(".daojishi").show();
                            $(".daojishinum").text(num);
                            begintime = setInterval(function(){
                                if(num <= 1){
                                    clearInterval(begintime);
                                    $(".daojishi").remove(); //删掉倒计时
                                    setPoints();
                                }else{
                                    $(".daojishinum").text(--num);
                                }
                            },1000);
                        });
                    });
                });
            })
        }
    },function(e) {
        var src = e.src ||"";
        load.find("span").text(~~e.percent+"%");
    },function(e) {
        load.text("游戏加载失败，请刷新页面重试");
    });

    Crafty.audio.play("intro", -1);
},function() {
    Crafty.audio.stop();
    $('#loading').hide();
});

function setPoints(x,y){
    var backgroundBg,
        backgroundBg = "url(" + game_path + "Caopi.png)",
        levelname = "Level"+ (++Crafty.config.level),
        player;

    Crafty.config.gamestart = true;
    $("#gamescore").show();
    Crafty.defineScene(levelname,function() {
        //Setup background of level
        Crafty.background(backgroundBg);
        //Crafty.stage.elem.style.backgroundPosition = "0px " + frame * Crafty.config.acceleration + "px";

        //Bind Gameloop to the Scene
        Crafty.unbind("EnterFrame");
        Crafty.bind("EnterFrame",function(frame) {
            // 奇数关卡的设置
            if(Crafty.config.level % 2 != 0){
                $('#cr-stage .life').show();
                spotObject(frame.frame);
            }else{
                $('#cr-stage .life').hide();
            }

            Crafty.trigger("setBackGround", frame.frame);
        })

        if(Crafty.config.level % 2 != 0){
            Crafty.config.level
            Crafty.startScore();
            Crafty.config.addemeny = true;
            Crafty.config.levelstats++;
            player = Crafty.e("Player");
            Crafty("Player").archer = false;
            // 奇数关卡跑动时，加速度+0.5
            //Crafty.config.acceleration += 0.5;
            Crafty.config.GoalBackGround = false;
            $('#interface,#gamescore').fadeIn();
            $("#gamelevel").text('第 '+Crafty.config.levelstats+' 关');
        }else{
            player = Crafty.e("Player");

            player.attr({
                x: Crafty.viewport.width/2-player.w/2,
                y: Crafty.viewport.height - player.h,
            }).tween({
                x: Crafty.viewport.width/2 - player.w/2,
                y: Crafty.viewport.height - player.h - 35
            }, 600)

            player.archer = true;
            player.addComponent("Twoway");
            player.twoway(player.movementSpeed);
            var line1 = Crafty.e("Line");
            var line2 = Crafty.e("Line2");
            var goalkeeper = Crafty.e("Goalkeeper");
            var goal = Crafty.e("Goal");
            var goalbg = Crafty.e("GoalBackGround");
            $('#interface,#gamescore').fadeOut();

            Crafty.config.disablecontrol = false;
        }
        
    });
    
    //_oldPlayer = undefined;
    Crafty.config.changeing = false;
    Crafty.enterScene(levelname);
}

Crafty.config.changeing = false;

// 变更射门关卡
function changeScene(){
    Crafty.stopScore();
    Crafty.config.changeing = true;
    Crafty.config.addemeny = false;
    if(Crafty("Player").super){
        Crafty.config.acceleration = Crafty.config.backtime;
        Crafty("Player").toggleComponent(Crafty("Player").ship, Crafty("Player").supership);
        Crafty("Player").css("background","url('"+game_path+"Qiuyuan.png')");
        Crafty.config.backtime = undefined;
        Crafty("Player").super = false;
        clearTimeout(window._olatimerout);
    }
    Crafty.config.disablecontrol = true;
    $("#warning").show().removeClass().addClass('warning');
    setTimeout(function(){
        if(Crafty("Jersey").length <= 0 && Crafty("Pile").length <= 0  && Crafty("Pile_attack").length <= 0 && Crafty("Broom").length <= 0){
            Crafty("Player").runout = true;
            $("#warning").hide();
            setInterval(function(){
                if(Crafty("Player").length <= 0){
                    setPoints();
                }
            },10)
        }else{
            // 通过计算障碍物的数量，保证人物到球门前没有任何障碍物
            clearTimeout(Crafty.config.changeing)
            Crafty.config.changeing = setTimeout(function(){
                changeScene();
            },50)
        }
    },2000);

}

// 活动障碍物对象
function spotObject(frame) {
    if(Crafty.config.score % 100 == 0 && Crafty.config.score != 0 && !Crafty.config.changeing){
        changeScene();
        return false;
    }

    if(Crafty.config.addemeny){
        if (frame % (122 * Math.ceil(Crafty.config.level / 2)) == 0 && Crafty("Jersey").length < 1) {
            Crafty.e("Jersey");
        }

        if (frame % Math.floor(38 / Math.ceil(Crafty.config.level / 2)) == 0 && Crafty("Pile").length < Crafty.config.levelstats) {
            Crafty.e("Pile");
        }

        if (frame % Math.floor(122 / Math.ceil(Crafty.config.level / 2)) == 0 && Crafty("Pile_attack").length < Crafty.config.level && Crafty.config.levelstats > 3) {
            Crafty.e("Pile_attack");
        }

        if (frame % Math.floor(900 / Math.ceil(Crafty.config.level / 2)) == 0 && Crafty("Broom").length < 1 && Crafty.config.levelstats > 2) {
            Crafty.e("Broom");
        } 
    }
};

Crafty.bind("setBackGround",function(frame) {
    if(!Crafty.config.GoalBackGround){
        Crafty.stage.elem.style.backgroundPosition = "0px " + frame * Crafty.config.acceleration + "px";
    }
})

Crafty.bind("UpdateStats",function(player) {
    $('#cr-stage .life').text(player.current);
});

// 游戏结束场景
Crafty.bind("GameOver",function(score) {
    Crafty.e("Gameover");
    Crafty.config.gamestart = false;
    window._olasocket.emit('act',{k:window._qquid,d:'game_over_mobile',s:null});
    setTimeout(function(){
	    //window.registerZone2({bosszone:'wcgtitle'})
	    olaBoss.updata("wcgtitle");
        $(".gameend").show();
        $(".game_fenshu span").text(score)
        $('.chenghao span').text(window.ola_title(score))
        $(".fenshubox").hide();
        $(".gameoverbox").hide();
    },2000)
});
/*<<<<<<<<<<<<游戏主要结束>>>>>>>>>>>>>>>*/

var ISDATACALLBAKC= false;
//Passport
var Passport = {
    check : function(type) {
        if (Cookie.get('skey')!==null){
            var uin = Cookie.get("uin");
            if(uin!==null){
                Passport.uin = Number(Cookie.get("uin").substring(1));
                $(".listwarp").show();
                $(".gameend").hide();
                //提交分数
                $.getScript('http://active.qq.com/sort.php?t=s&score='+Crafty.config.score+'&id='+Passport.uin+'&type=jsonp',function(){});
                //超时2S填充本地数据
                setTimeout(function(){
                    if(!ISDATACALLBAKC){
                        var tpl ="";
                         tpl +='<li class="current"><i>1</i><strong>'+Passport.uin+'</strong><span>'+Crafty.config.score+'</span></li>';
                         $("#paihang_list ul").html(tpl);
                     }
                },2000);
            }else{
                Passport.ptlogin();
            }
        }else{
            Passport.ptlogin();
        };
    },
    ptlogin : function() {
        /*$("#loginFrame").attr('src','http://ui.ptlogin2.qq.com/cgi-bin/login?hide_title_bar=0&low_login=0&qlogin_auto_login=1&no_verifyimg=1&link_target=blank&appid=636014201&target=self&s_url=http://2014.qq.com/olarun/loginSuccess.htm');
        $(".weblogin").show();*/
       parent.userLogin();
    },
    loginSuccess : function(){
        $(".gameend").show();
        parent.ptlogin2_onClose();
        //$(".weblogin").hide();
        window.location.reload();
        if(getQueryStringByName("type") == 1){
            $(".ola_denglu_tip").hide();
            $(".ola_denglu").hide();
            ola_ewm();
        }
        
    }
}


var loginSuccess = parent.login.loginSuccess;
parent.login.loginSuccess = function(){
	if(window.ola_ewm){
		$(".gameend").show();
        window.location.reload();
        if(getQueryStringByName("type") == 1){
            $(".ola_denglu_tip").hide();
            $(".ola_denglu").hide();
            window.ola_ewm();
        }	
	}
	loginSuccess();
};

function ola_ewm(){
    Passport.uin = Number(Cookie.get("uin").substring(1));
    Passport.url = 'http://2014.qq.com/olarun/control.htm?id='+Passport.uin;
    $.getScript('http://active.qq.com/phpqrcode/index.php?size=10&url='+encodeURIComponent(Passport.url))
}


//称号
var ola_title = function(i){
    // title = {
    //     level : ['球童','学徒','青训队员','梯队主力','职业球员','希望之星','豪门主力','超级巨星','一代球王','宇宙队传奇']
    // }[name]
    var level = 100;
    var title = ['球童','学徒','青训队员','梯队主力','职业球员','希望之星','豪门主力','超级巨星','一代球王','宇宙队传奇'];
    if (level >= i) {
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+1+'.png'
        return title[0]
    }else if(level*2 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+2+'.png'
        return title[1]
    }else if(level*3 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+3+'.png'
        return title[2]
    }else if(level*4 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+4+'.png'
        return title[3]
    }else if(level*5 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+5+'.png'
        return title[4]
    }else if(level*6 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+6+'.png'
        return title[5]
    }else if(level*7 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+7+'.png'
        return title[6]
    }else if(level*8 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+8+'.png'
        return title[7]
    }else if(level*9 >= i){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+9+'.png'
        return title[8]
    }else if(level*10 >= i || i < level*11){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+10+'.png'
        return title[9]
    }else if(i >= level*11){
        Passport.shareimg ='//mat1.gtimg.com/joke/ola2014/image/share/'+10+'.png'
        return '宇宙队传奇'
    };
}


var SHAREFRIEDNNAME='';
var share = function() {
    var title = 'ola!快跑!_2014巴西世界杯_腾讯网';
    var url = 'http://2014.qq.com/olarun/ola_index.htm';
    var desc = '我正在玩OLA快跑，获得了“'+window.ola_title(Crafty.config.score)+'”称号，小伙伴快来参与，看看你是啥称号吧！';
    var pic = Passport.shareimg;
        $(".sharebox").animate({
                top:'0px'
        },300)
        $(".sharebox .sharet").click(function(){
            window.open("http://share.v.t.qq.com/index.php?c=share&a=index&url="+encodeURI(url)+"&appkey=801378464&title="+encodeURIComponent(desc)+"&pic="+encodeURI(pic));
        })
        $(".sharebox .shareqzone").click(function(){
            window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+encodeURI(url)+'&title='+encodeURIComponent(title)+'&pics='+encodeURI(pic)+'&summary='+encodeURIComponent(SHAREFRIEDNNAME+''+desc));
        })
        $(".sharebox .sharewb").click(function(){
            window.open("http://service.weibo.com/share/share.php?url="+encodeURI(url)+"&appkey=&title="+encodeURIComponent(desc)+"&pic="+encodeURI(pic)+"&ralateUid=&language=")
        })
        $(".sharebox .shareqq").click(function(){
            var a = "http://connect.qq.com/widget/shareqq/index.html",
    pl = '加点评论吧...',
    b = "",
    x = window.screen.width,
    y = window.screen.height;
    h = "", k = ""; //g = l.join("||")||"";
    k = a + "?url=" + encodeURIComponent(url) + "&showcount=0&desc=" + encodeURIComponent(pl) + "&summary=" +  encodeURIComponent(desc) + "&title="+ encodeURIComponent(title) + "&pics="+ pic +"&style=203&width=19&height=22";
    window.open(k, "", "height = 680, width = 960, top = "+(y-680)/2 + ", left = " + (x-960)/2 + ", toolbar = no, menubar = no, resizable = yes, location = yes,status = no" );
        });
        $(".sharebox p").click(function(){
            $(".sharebox").animate({
                top:'-264px'
            },300)
        })
      $(".sharebox p").onmouseover(function(){
	        $(this).css({
		        'background':'#ccc'
	        })
        })
    }
    
//提交分数接口回调
var _olaback = function(data){
    if(data && data.ret==0){
        if(Passport.uin && Passport.uin!==null){
            //alert("拉去排行");
            $.getScript('http://active.qq.com/sort.php?t=all&id='+Passport.uin+'&type=jsonp',function(){});
        }
    }else{
        Cookie.clear("skey",'/', "qq.com");
        login_next();
    }
};
//拉取排行分数接口回调
var olaback = function(data){
    ISDATACALLBAKC = true;
    if(data.ret==1){
                Cookie.clear("skey",'/', "qq.com");
                login_next();
    }else{
           var data =data.data;
           if(data.have[0] !== null && data.nohave[0] !== null){
                var tpl ="",listArray = data.have.concat(data.nohave);
                //排行&邀请
                for(var i =0;i<listArray.length;i++){
                    if(listArray[i].uin == Passport.uin) { 
                        tpl +='<li class="current"><i>'+(i+1)+'</i><img src="//mat1.gtimg.com/2014/ola2014/getheadimg.jpg"><strong style="color:red">我自己</strong><span>'+listArray[i].score+'</span></li>';
                    }else{
                        if(listArray[i].score){
                        //得分用户
                             tpl +='<li><i>'+(i+1)+'</i><img src="'+listArray[i].img+'"><strong>'+listArray[i].name+'</strong><span>'+listArray[i].score+'</span></li>';
                        }else{
                        //邀请好友
                        var friendName = "腾讯网友";
                        friendName = listArray[i].remark ? listArray[i].remark : listArray[i].name;
                        tpl +='<li><i>'+(i+1)+'</i><img src="'+listArray[i].img+'"><strong>'+friendName+'</strong><span class="invokfriend">邀请</span></li>';    
                        }
                    }
                }

                $("#paihang_list ul").html(tpl);
                $(".invokfriend").bind("touchstart",function(){
                    SHAREFRIEDNNAME = $(this).prev().text();
                    share();
                });
                //根据榜单和中奖名单的条数决定是否启用滑动模块
                var paihang_list =0;
                var huojiang_list=0;
                if ($('#paihang_list li').length > 4) {
                    var paihang_list = 1;
                };
                if ($('#huojiang_list li').length > 4) {
                    var huojiang_list = 1;
                };
                if (paihang_list || huojiang_list) {
                    $.getScript('//mat1.gtimg.com/joke/ola2014/js/iscroll.js',function(){
                        var myScroll,myScroll2;
                        function loaded () {
                            myScroll = new IScroll('#paihang_list', { mouseWheel: true });
                        }
                        function loaded2 () {
                            myScroll2 = new IScroll('#huojiang_list', { mouseWheel: true });
                        }
                        if (paihang_list) {
                            loaded();
                        };
                        if (huojiang_list) {
                            loaded2();
                        };
                        
                    });
                };
            }else{
                 /*登录成功，但是好友关系拿失败了*/
                 var tpl ="";
                 tpl +='<li class="current"><i>1</i><strong>'+Passport.uin+'</strong><span>'+Crafty.config.score+'</span></li>';
                 $("#paihang_list ul").html(tpl);
            }
     }
}


// 排行接口返回成功回调;  在安卓新闻app里callback回调函数有冲突.
var olaback = function(data){
    ISDATACALLBAKC = true;
    if(data.ret==1){
        Cookie.clear("skey",'/', "qq.com");
        Passport.ptlogin();
    }else{
           var data =data.data;
           if(data.have[0] !== null && data.nohave[0] !== null){
                var tpl ="",listArray = data.have.concat(data.nohave);
                //排行&邀请
                for(var i =0;i<listArray.length;i++){
                    if(listArray[i].uin == Passport.uin) { 
                        tpl +='<li class="current"><i>'+(i+1)+'</i><img src="//mat1.gtimg.com/2014/ola2014/getheadimg.jpg"><strong style="color:red">我自己</strong><span>'+listArray[i].score+'</span></li>';
                    }else{
                        if(listArray[i].score){
                        //得分用户
                             tpl +='<li><i>'+(i+1)+'</i><img src="'+listArray[i].img+'"><strong>'+listArray[i].name+'</strong><span>'+listArray[i].score+'</span></li>';
                        }else{
                        //邀请好友
                        var friendName = "腾讯网友";
                        friendName = listArray[i].remark ? listArray[i].remark : listArray[i].name;
                        tpl +='<li><i>'+(i+1)+'</i><img src="'+listArray[i].img+'"><strong>'+friendName+'</strong><span class="invokfriend">邀请</span></li>';    
                        }
                    }
                }

                $("#paihang_list ul").html(tpl);
                $(".invokfriend").on("click",function(){
                    SHAREFRIEDNNAME = $(this).prev().text();
                    share();
                });
                //根据榜单和中奖名单的条数决定是否启用滑动模块
                var paihang_list =0;
                var huojiang_list=0;
                if ($('#paihang_list li').length > 7) {
                    var paihang_list = 1;
                };
                if ($('#huojiang_list li').length > 7) {
                    var huojiang_list = 1;
                };
                if (paihang_list || huojiang_list) {
                    $.getScript('//mat1.gtimg.com/joke/ola2014/js/iscroll.js',function(){
                        var myScroll,myScroll2;
                        function loaded () {
                            myScroll = new IScroll('#paihang_list', { mouseWheel: true });
                        }
                        function loaded2 () {
                            myScroll2 = new IScroll('#huojiang_list', { mouseWheel: true });
                        }
                        if (paihang_list) {
                            loaded();
                        };
                        if (huojiang_list) {
                            loaded2();
                        };
                        
                    });
                };
            }else{
                 /*登录成功，但是好友关系拿失败了*/
                 var tpl ="";
                 tpl +='<li class="current"><i>1</i><strong>'+Passport.uin+'</strong><span>'+Crafty.config.score+'</span></li>';
                 $("#paihang_list ul").html(tpl);
            }
     }
}


/*function ptlogin2_onClose(){
    $(".weblogin").hide();
    $("#loginBg").hide();
    $("#login_div").css({'left':'-9999px'});      
}*/
</script>


<script language="javascript" src="//mat1.gtimg.com/ping.js"></script>
<script language="javascript">
if(typeof(pgvMain) == "function"){
	pvRefUrl = 'http://2014.qq.com/olarun/game.htm';
    pgvMain();
    
}
</script>
</body>
</html><!--[if !IE]>|xGv00|2016dc4f73837534149e3ba903bb3721<![endif]-->